<svg viewBox="0 0 1000 800" xmlns="http://www.w3.org/2000/svg">
  <!-- Background and title -->
  <rect width="1000" height="800" fill="#f9fafb" />
  <text x="500" y="40" text-anchor="middle" font-family="Arial" font-size="24" font-weight="bold">Netro: Last-Mile Delivery Optimization Architecture</text>
  
  <!-- Layer backgrounds -->
  <rect x="100" y="80" width="800" height="140" rx="10" fill="#e6f1ff" stroke="#90c2ff" stroke-width="2" />
  <rect x="100" y="240" width="800" height="180" rx="10" fill="#e6f9ed" stroke="#90ddb0" stroke-width="2" />
  <rect x="100" y="440" width="800" height="140" rx="10" fill="#fff0e6" stroke="#ffc090" stroke-width="2" />
  <rect x="100" y="600" width="800" height="80" rx="10" fill="#f0f0f0" stroke="#c0c0c0" stroke-width="2" />
  
  <!-- Layer titles -->
  <rect x="120" y="70" width="160" height="20" rx="4" fill="#ffffff" />
  <text x="200" y="85" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="#3b82f6">Core Domain Layer</text>
  
  <rect x="120" y="230" width="200" height="20" rx="4" fill="#ffffff" />
  <text x="220" y="245" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="#10b981">Application Services Layer</text>
  
  <rect x="120" y="430" width="170" height="20" rx="4" fill="#ffffff" />
  <text x="205" y="445" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="#f97316">Infrastructure Layer</text>
  
  <rect x="120" y="590" width="200" height="20" rx="4" fill="#ffffff" />
  <text x="220" y="605" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="#6b7280">Configuration &amp; Utilities</text>
  
  <!-- Core Domain Components -->
  <rect x="120" y="100" width="170" height="100" rx="6" fill="#bfdbfe" stroke="#3b82f6" stroke-width="1" />
  <text x="205" y="120" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="#1e40af">Entities</text>
  <text x="205" y="140" text-anchor="middle" font-family="Arial" font-size="11" fill="#1e40af">Location</text>
  <text x="205" y="160" text-anchor="middle" font-family="Arial" font-size="11" fill="#1e40af">Vehicle (Truck, Robot)</text>
  <text x="205" y="180" text-anchor="middle" font-family="Arial" font-size="11" fill="#1e40af">Cluster, Route</text>
  
  <rect x="310" y="100" width="170" height="100" rx="6" fill="#bfdbfe" stroke="#3b82f6" stroke-width="1" />
  <text x="395" y="120" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="#1e40af">Interfaces</text>
  <text x="395" y="140" text-anchor="middle" font-family="Arial" font-size="11" fill="#1e40af">ClusteringAlgorithm</text>
  <text x="395" y="160" text-anchor="middle" font-family="Arial" font-size="11" fill="#1e40af">CapacitatedSplitter</text>
  <text x="395" y="180" text-anchor="middle" font-family="Arial" font-size="11" fill="#1e40af">RoutingAlgorithm</text>
  
  <rect x="500" y="100" width="170" height="100" rx="6" fill="#bfdbfe" stroke="#3b82f6" stroke-width="1" />
  <text x="585" y="120" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="#1e40af">Value Objects</text>
  <text x="585" y="145" text-anchor="middle" font-family="Arial" font-size="11" fill="#1e40af">Immutable data structures</text>
  <text x="585" y="165" text-anchor="middle" font-family="Arial" font-size="11" fill="#1e40af">Location coordinates</text>
  <text x="585" y="185" text-anchor="middle" font-family="Arial" font-size="11" fill="#1e40af">Time windows</text>
  
  <rect x="690" y="100" width="170" height="100" rx="6" fill="#bfdbfe" stroke="#3b82f6" stroke-width="1" />
  <text x="775" y="120" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="#1e40af">Domain Rules</text>
  <text x="775" y="145" text-anchor="middle" font-family="Arial" font-size="11" fill="#1e40af">Capacity constraints</text>
  <text x="775" y="165" text-anchor="middle" font-family="Arial" font-size="11" fill="#1e40af">Battery limitations</text>
  <text x="775" y="185" text-anchor="middle" font-family="Arial" font-size="11" fill="#1e40af">Routing constraints</text>
  
  <!-- Application Services Components -->
  <rect x="120" y="260" width="180" height="70" rx="6" fill="#a7f3d0" stroke="#10b981" stroke-width="1" />
  <text x="210" y="280" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="#047857">Clustering</text>
  <text x="210" y="300" text-anchor="middle" font-family="Arial" font-size="11" fill="#047857">ClusterService</text>
  <text x="210" y="315" text-anchor="middle" font-family="Arial" font-size="11" fill="#047857">HDBSCANClusterer</text>
  
  <rect x="120" y="340" width="180" height="60" rx="6" fill="#a7f3d0" stroke="#10b981" stroke-width="1" />
  <text x="210" y="360" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="#047857">Optimization</text>
  <text x="210" y="380" text-anchor="middle" font-family="Arial" font-size="11" fill="#047857">AdvancedLocationOptimizer</text>
  
  <rect x="320" y="260" width="180" height="70" rx="6" fill="#a7f3d0" stroke="#10b981" stroke-width="1" />
  <text x="410" y="280" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="#047857">Routing</text>
  <text x="410" y="300" text-anchor="middle" font-family="Arial" font-size="11" fill="#047857">NetroRoutingService</text>
  <text x="410" y="315" text-anchor="middle" font-family="Arial" font-size="11" fill="#047857">RobotRoutingService</text>
  
  <rect x="320" y="340" width="180" height="60" rx="6" fill="#a7f3d0" stroke="#10b981" stroke-width="1" />
  <text x="410" y="360" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="#047857">Algorithms</text>
  <text x="410" y="380" text-anchor="middle" font-family="Arial" font-size="11" fill="#047857">ORToolsCVRP, LocalSearch</text>
  
  <rect x="520" y="260" width="180" height="70" rx="6" fill="#a7f3d0" stroke="#10b981" stroke-width="1" />
  <text x="610" y="280" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="#047857">Robot Deployment</text>
  <text x="610" y="300" text-anchor="middle" font-family="Arial" font-size="11" fill="#047857">SmartLoader</text>
  <text x="610" y="315" text-anchor="middle" font-family="Arial" font-size="11" fill="#047857">ClusterRouteHandler</text>
  
  <rect x="520" y="340" width="180" height="60" rx="6" fill="#a7f3d0" stroke="#10b981" stroke-width="1" />
  <text x="610" y="360" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="#047857">Route Planning</text>
  <text x="610" y="380" text-anchor="middle" font-family="Arial" font-size="11" fill="#047857">TruckRoutePlanner</text>
  
  <rect x="720" y="260" width="160" height="140" rx="6" fill="#a7f3d0" stroke="#10b981" stroke-width="1" />
  <text x="800" y="280" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="#047857">Benchmarking</text>
  <text x="800" y="300" text-anchor="middle" font-family="Arial" font-size="11" fill="#047857">BaselineTruckService</text>
  <text x="800" y="315" text-anchor="middle" font-family="Arial" font-size="11" fill="#047857">ComparisonService</text>
  <text x="800" y="330" text-anchor="middle" font-family="Arial" font-size="11" fill="#047857">OrderResender</text>
  <text x="800" y="360" text-anchor="middle" font-family="Arial" font-size="11" fill="#047857">Metrics:</text>
  <text x="800" y="375" text-anchor="middle" font-family="Arial" font-size="11" fill="#047857">- Total distance</text>
  <text x="800" y="390" text-anchor="middle" font-family="Arial" font-size="11" fill="#047857">- Time savings</text>
  
  <!-- Infrastructure Components -->
  <rect x="120" y="460" width="220" height="100" rx="6" fill="#fed7aa" stroke="#f97316" stroke-width="1" />
  <text x="230" y="480" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="#9a3412">I/O</text>
  <text x="230" y="500" text-anchor="middle" font-family="Arial" font-size="11" fill="#9a3412">SolomonReader</text>
  <text x="230" y="515" text-anchor="middle" font-family="Arial" font-size="11" fill="#9a3412">DistanceMatrixCalculator</text>
  <text x="230" y="540" text-anchor="middle" font-family="Arial" font-size="11" fill="#9a3412">Loads standard VRPTW datasets</text>
  
  <rect x="360" y="460" width="220" height="100" rx="6" fill="#fed7aa" stroke="#f97316" stroke-width="1" />
  <text x="470" y="480" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="#9a3412">Visualization</text>
  <text x="470" y="500" text-anchor="middle" font-family="Arial" font-size="11" fill="#9a3412">SolutionVisualizer</text>
  <text x="470" y="520" text-anchor="middle" font-family="Arial" font-size="11" fill="#9a3412">- Plots clusters</text>
  <text x="470" y="535" text-anchor="middle" font-family="Arial" font-size="11" fill="#9a3412">- Plots truck routes</text>
  <text x="470" y="550" text-anchor="middle" font-family="Arial" font-size="11" fill="#9a3412">- Plots Netro solution</text>
  
  <rect x="600" y="460" width="280" height="100" rx="6" fill="#fed7aa" stroke="#f97316" stroke-width="1" />
  <text x="740" y="480" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="#9a3412">External Libraries</text>
  <text x="740" y="500" text-anchor="middle" font-family="Arial" font-size="11" fill="#9a3412">OR-Tools: Constraint solving</text>
  <text x="740" y="515" text-anchor="middle" font-family="Arial" font-size="11" fill="#9a3412">HDBSCAN: Density-based clustering</text>
  <text x="740" y="530" text-anchor="middle" font-family="Arial" font-size="11" fill="#9a3412">NumPy: Numerical computations</text>
  <text x="740" y="545" text-anchor="middle" font-family="Arial" font-size="11" fill="#9a3412">Matplotlib: Visualization</text>
  
  <!-- Configuration & Utilities Components -->
  <rect x="120" y="620" width="220" height="40" rx="6" fill="#e5e7eb" stroke="#6b7280" stroke-width="1" />
  <text x="230" y="645" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="#374151">Configuration</text>
  
  <rect x="360" y="620" width="220" height="40" rx="6" fill="#e5e7eb" stroke="#6b7280" stroke-width="1" />
  <text x="470" y="645" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="#374151">Utilities</text>
  
  <rect x="600" y="620" width="280" height="40" rx="6" fill="#e5e7eb" stroke="#6b7280" stroke-width="1" />
  <text x="740" y="645" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="#374151">Environment Variables</text>
  
  <!-- Application Orchestration -->
  <rect x="300" y="700" width="400" height="50" rx="6" fill="#ddd6fe" stroke="#8b5cf6" stroke-width="2" />
  <text x="500" y="720" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold" fill="#5b21b6">NetroApplication</text>
  <text x="500" y="740" text-anchor="middle" font-family="Arial" font-size="12" fill="#5b21b6">Main Orchestration &amp; Command-line Interface</text>
  
  <!-- Connection Arrows -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#6b7280" />
    </marker>
  </defs>
  
  <!-- Vertical connections between layers -->
  <line x1="500" y1="220" x2="500" y2="240" stroke="#6b7280" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrowhead)" />
  <line x1="500" y1="420" x2="500" y2="440" stroke="#6b7280" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrowhead)" />
  <line x1="500" y1="580" x2="500" y2="600" stroke="#6b7280" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrowhead)" />
  <line x1="500" y1="680" x2="500" y2="700" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)" />
  
  <!-- Data Flow -->
  <rect x="850" y="80" width="50" height="500" rx="6" fill="#fef9c3" stroke="#facc15" stroke-width="1" />
  <text x="875" y="100" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="#854d0e">Data Flow</text>
  
  <line x1="875" y1="120" x2="875" y2="150" stroke="#854d0e" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="875" y="170" text-anchor="middle" font-family="Arial" font-size="10" fill="#854d0e">Load Data</text>
  
  <line x1="875" y1="190" x2="875" y2="220" stroke="#854d0e" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="875" y="240" text-anchor="middle" font-family="Arial" font-size="10" fill="#854d0e">Cluster</text>
  
  <line x1="875" y1="260" x2="875" y2="290" stroke="#854d0e" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="875" y="310" text-anchor="middle" font-family="Arial" font-size="10" fill="#854d0e">Route</text>
  
  <line x1="875" y1="330" x2="875" y2="360" stroke="#854d0e" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="875" y="380" text-anchor="middle" font-family="Arial" font-size="10" fill="#854d0e">Optimize</text>
  
  <line x1="875" y1="400" x2="875" y2="430" stroke="#854d0e" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="875" y="450" text-anchor="middle" font-family="Arial" font-size="10" fill="#854d0e">Compare</text>
  
  <line x1="875" y1="470" x2="875" y2="500" stroke="#854d0e" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="875" y="520" text-anchor="middle" font-family="Arial" font-size="10" fill="#854d0e">Visualize</text>
  
  <!-- Workflow at the bottom -->
  <rect x="150" y="770" width="700" height="20" rx="4" fill="#f9fafb" />
  <text x="500" y="785" text-anchor="middle" font-family="Arial" font-size="12" fill="#4b5563">Based on Clean Architecture principles and Domain-Driven Design</text>
</svg>
